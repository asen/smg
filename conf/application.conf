# This is the main configuration file for the application.
# ~~~~~

# Secret key
# ~~~~~
# The secret key is used to secure cryptographics functions.
#
# This must be changed for production, but we recommend not changing it in this file.
#
# See http://www.playframework.com/documentation/latest/ApplicationSecret for more details.
play.crypto.secret = "changeme"

# The application languages
# ~~~~~
play.i18n.langs = [ "en" ]

# Router
# ~~~~~
# Define the Router object to use for this application.
# This router will be looked up first when the application is starting up,
# so make sure this is the entry point.
# Furthermore, it's assumed your route file is named properly.
# So for an application router like `my.application.Router`,
# you may need to define a router file `conf/my.application.routes`.
# Default to Routes in the root package (and conf/routes)
# play.http.router = my.application.Routes

# Database configuration
# ~~~~~
# You can declare as many datasources as you want.
# By convention, the default datasource is named `default`
#
# db.default.driver=org.h2.Driver
# db.default.url="jdbc:h2:mem:play"
# db.default.username=sa
# db.default.password=""

# Evolutions
# ~~~~~
# You can disable evolutions if needed
# play.evolutions.enabled=false

# You can disable evolutions for a specific datasource if necessary
# play.evolutions.db.default.enabled=false

parsers.anyContent.maxLength=20MB
# parsers.text.maxLength = 20MB
play.http.parser.maxMemoryBuffer = 20MB

play.ws.timeout.connection = 10000
play.ws.compressionEnabled = true

################ SMG config below
# SMG guice module
play.modules.enabled += "modules.SMGModule"

akka-contexts {
  rrd-graph {
    fork-join-executor {
      parallelism-factor = 4.0
      parallelism-max = 6.0
    }
  }
  monitor {
    fork-join-executor {
      parallelism-factor = 4.0
      parallelism-max = 6.0
    }
  }
  spiker-plugin {
    fork-join-executor {
      parallelism-factor = 2.0
      parallelism-max = 3.0
    }
  }
}

# default (if not present) is /etc/smg/config.yml
smg.config = "/etc/smg/config.yml"
# smg.config = "smgconf/config.yml"
smg.dataFeedEnabled = true

# default (if not present) is true - use internal scheduler
smg.useInternalScheduler = true

# Use smg.timeoutCommand to override the timeout command executable (e.g. gtimeout on mac with homebrew)
# smg.timeoutCommand = "gtimeout"
# Use smg.executorCommand to override the command executor (by default bash -c <cmd>). Might need to override
# that if SMG ever runs on Windows
# smg.executorCommand = ["bash", "-c"]

# per-interval fixed thread pool size (default is 4)
smg.defaultThreadsPerInterval = 4
# override specific intervals as needed
smg.threadsPerIntervalMap = {
  "interval_60" : 30
  "interval_300" : 3
  "interval_3600" : 4
}

play.http.filters = controllers.SMGHttpFilters

smg.plugins = [
  {
    id = spiker
    class = "com.smule.smgplugins.spiker.SMGSpikerPlugin"
    interval = 600
    config = "/etc/smg/spiker-plugin.yml"
  },
#  {
#    id = livemon
#    class = "com.smule.smgplugins.livemon.SMGLiveMonPlugin"
#    interval = 0
#    config = "/etc/smg/livemon-plugin.yml"
#  },
  {
    id = calc
    class = "com.smule.smgplugins.calc.SMGCalcPlugin"
    interval = 0
    config = "/etc/smg/calc-plugin.yml"
  },
  {
    id = jsgraph
    class = "com.smule.smgplugins.jsgraph.SMGJsGraphPlugin"
    interval = 0
    config = "smgconf/jsgraph-plugin.yml"
  }
]

